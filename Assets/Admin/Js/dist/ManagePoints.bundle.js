"use strict";(self.webpackChunkreact_wordpress=self.webpackChunkreact_wordpress||[]).push([[99],{140:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(6540),n=a(3112);const r=function(e){var t=e.setActive,a=e.activeState,n=e.setActiveState,r=e.right,s=e.activeLabels;return l.createElement("div",{className:"flex   flex-col border rounded-lg bg-white w-55 text-light border-light_border z-10 absolute ".concat(r," top-13 overflow-hidden")},s.map((function(e,r){return l.createElement("p",{key:r,onClick:function(){!function(e){t(!1),n({value:e.value,label:e.label})}(e)},className:"flex items-center  px-4 py-2 justify-between ".concat(e.value===a.value?"bg-primary_extra_light text-primary":"bg-white text-dark "," hover:bg-primary_extra_light cursor-pointer hover:bg-opacity-50")},e.label,e.value===a.value&&l.createElement("span",{className:"flex items-center"},l.createElement("i",{className:" wlr wlrf-tick color-important font-medium  text-lg 2xl:text-xl leading-0 cursor-pointer "})))})))},s=function(e){var t=e.icon,a=e.active,s=e.setActive,i=e.activeState,c=e.setActiveState,o=e.activeLabels,m=e.width,u=void 0===m?"w-36":m,d=e.title,p=e.closeOtherDropDown,x=l.useContext(n.ib);return l.createElement("div",{className:"relative flex items-center border justify-between  ".concat(u," rounded-lg border-light_border p-1.5 cursor-pointer "),onClick:function(){p(),s(!a)}},l.createElement("div",{className:"flex items-center justify-start space-x-2 text-10px xl:text-xs 2xl:text-sm_14_l_20 "},l.createElement("p",{className:"font-medium text-light"},d||x.common.filter),l.createElement("p",{className:"text-dark font-semibold"},i.label)),l.createElement("div",null,t),a&&l.createElement(r,{active:a,setActive:s,activeState:i,setActiveState:c,right:"right-0",activeLabels:o,width:"w-40"}))}},7859:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(6540),n=[{value:5},{value:10},{value:20},{value:50},{value:100}];const r=function(e){e.editlimit;var t=e.setEditLimit,a=e.limitFilter,r=e.setLimitFilter,s=e.right,i=void 0===s?0:s;return[5,10,20,50,100].includes(a.value),l.createElement("div",{className:"absolute flex  flex-col border rounded-lg bg-white w-23  text-light border-light_border z-10  ".concat(i,"  bottom-14 overflow-hidden")},n.map((function(e,n){return l.createElement("p",{key:n,onClick:function(){return function(e){t(!1),r({value:e.value})}(e)},className:"flex items-center  px-4 py-2 justify-between ".concat(e.value==a.value?"bg-primary_extra_light text-primary":"bg-white text-dark "," hover:bg-primary_extra_light cursor-pointer hover:bg-opacity-50")},e.value,e.value==a.value&&l.createElement("span",{className:"flex items-center"},l.createElement("i",{className:" wlr wlrf-tick color-important font-medium  text-lg 2xl:text-xl leading-0 cursor-pointer "})))})))},s=function(e){var t=e.editLimit,a=e.setEditLimit,n=e.limitFilter,s=e.setLimitFilter,i=e.closeOtherDropDown;return l.createElement("div",{className:"relative flex items-center border justify-between h-12 w-23 px-4 py-2 space-x-3 rounded-lg border-light_border   cursor-pointer ",onClick:function(){i(),a(!t)}},l.createElement("div",{className:"text-dark font-medium text-sm_14_l_20"},n.value),l.createElement("div",null,l.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-updown color-important "})),t&&l.createElement(r,{editLimit:t,setEditLimit:a,limitFilter:n,setLimitFilter:s,right:"right-0"}))}},4855:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var l=a(4467),n=a(5458),r=a(296),s=a(6540),i=a(6968),c=a(5666),o=a(9210),m=a(6070),u=a(3112),d=a(5419),p=a(4142);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){(0,l.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const _=function(e){var t=e.localState,a=e.loadUserLists,l=e.close,n=e.open,o=e.setOpen,m=s.useState({user_email:"",points:0,comments:""}),x=(0,r.A)(m,2),_=x[0],g=x[1],v=s.useContext(u.ib),b=s.useState({}),w=(0,r.A)(b,2),h=w[0],y=w[1],E=s.useState([]),N=(0,r.A)(E,2),A=N[0],S=N[1],C=s.useState(!1),k=(0,r.A)(C,2),j=k[0],O=k[1],D=s.useState(!1),P=(0,r.A)(D,2),L=P[0],F=P[1];return s.createElement("div",{className:"w-full flex flex-col"},s.createElement("div",{className:"flex flex-col px-7 p-3 border-b  space-y-6 items-start w-35rem"},s.createElement(p.A,{width:"w-full",required:!0,type:"email",margin:"",placeholder:v.manage_points.add_new_customer.email.placeholder,label:v.manage_points.add_new_customer.email.name,value:_.user_email,onChange:function(e){g(f(f({},_),{},{user_email:e.target.value}))},onfocus:function(){return F(!0)},error:A.includes("user_email")||""===_.user_email&&L,error_message:A.includes("user_email")&&(0,d.u1)(h,"user_email")}),s.createElement(p.A,{width:"w-full",type:"text",margin:"",label:v.common.points_text,value:_.points,onChange:function(e){g(f(f({},_),{},{points:(0,d.yb)(e.target.value)}))},error:A.includes("points"),error_message:A.includes("points")&&(0,d.u1)(h,"points")}),s.createElement(p.A,{width:"w-full",type:"area",margin:"",label:v.manage_points.add_new_customer.comments,value:_.comments,onChange:function(e){g(f(f({},_),{},{comments:e.target.value}))},error:A.includes("comments"),error_message:A.includes("comments")&&(0,d.u1)(h,"comments")})),s.createElement("div",{className:"w-full flex items-center py-3 px-7   justify-end space-x-4"},s.createElement(c.A,{padding:"px-6 py-2.5",textStyle:"text-light font-medium text-sm_14_l_20",bgColor:"bg-white",outline:!0,outlineStyle:"border-light ",click:function(e){e.preventDefault(),o(!n)}},v.common.cancel),s.createElement(c.A,{disabled:j,padding:"px-6 py-3",textStyle:"text-sm_14_l_20 font-medium text-white ",click:function(e){var n;e.preventDefault(),n={wlr_nonce:t.local.point_users.wlr_user_nonce,action:"wlr_add_new_customer"},n=Object.assign({},n,_),O(!0),(0,i.MB)(n).then((function(e){var t=(0,d.xu)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?(alertify.success(t.data.message),a(),g({user_email:"",points:0,comments:""}),O(!1),y({}),S([]),l()):!1===t.success&&null!==t.data&&(y(t.data),void 0===t.data.field_error&&S([]),F(!0),(0,d.E0)(t.data,{setErrorList:S}),O(!1))}))}},v.common.save)))};var g=a(8785),v=a(4632),b=a(1845),w=a(5235),h=a(1852),y=a(3520);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const A=function(e){var t=e.close,a=e.State,l=e.setState,n=e.nonce,o=e.isProgress,m=s.useState(!0),p=(0,r.A)(m,2),x=p[0],f=p[1],_=s.useState(null),E=(0,r.A)(_,2),A=E[0],S=E[1],C=s.useState("equal"),k=(0,r.A)(C,2),j=k[0],O=k[1],D=s.useContext(u.ib),P=function(e,t){var a=s.useState(e),l=(0,r.A)(a,2),n=l[0],i=l[1];return s.useEffect((function(){var e;(e=n)&&"incomplete"===e.response_status&&B()}),[n]),[n,i]}({file:{},header:{},need_update:"no",process_count:0,total_count:0,limit_start:w.Nf}),L=(0,r.A)(P,2),F=L[0],M=L[1],B=function(){var e=Object.assign({},{wlr_nonce:n,action:"wlr_handle_import",need_update:F.need_update,handle_count:F.process_count,total_count:F.total_count,limit_start:F.limit_start,update_type:j,limit:a.csv_limit},F.file);(0,i.MB)(e).then((function(e){var a=(0,d.xu)(e.data);if(!0===a.success&&null!==a.data&&a.data!=={}){f(!1);var l=a.data.success;"incomplete"===l?a.data.total_count<a.data.limit_start?M(N(N({},F),{},{process_count:a.data.total_count,limit_start:a.data.limit_start,response_status:l})):M(N(N({},F),{},{process_count:F.limit_start,limit_start:a.data.limit_start,response_status:l})):"completed"===a.data.success&&(o.set(!1),M(N(N({},F),{},{process_count:F.limit_start-1,limit_start:a.data.limit_start,response_status:l})),f(!1),alertify.success(a.data.message),setTimeout((function(){R(1),T(0),t(),location.reload()}),1500),f(!1))}else!1===a.success&&null!==a.data&&(alertify.error(a.data.message),f(!1),location.reload())}))},z=s.useRef(null),I=s.useState(1),q=(0,r.A)(I,2),H=q[0],R=q[1],U=s.useState(0),V=(0,r.A)(U,2),$=V[0],T=V[1],W=[{label:D.common.select.yes,value:"yes"},{label:D.common.select.no,value:"no"}],K=[{label:"10",value:"10"},{label:"20",value:"20"},{label:"40",value:"40"},{label:"50",value:"50"}],Y=[{label:D.common.select.add,value:"add"},{label:D.common.select.sub,value:"sub"},{label:D.common.select.equal,value:"equal"}],G=[{id:1,name:D.manage_points.progress.upload},{id:2,name:D.manage_points.progress.preview},{id:3,name:D.manage_points.progress.completed}],J=function(e){var t=e.item;return s.createElement("div",{className:"flex items-center space-x-2 ".concat(t.id!=G.length?"w-4/12":"w-3/12")},s.createElement("div",{className:"flex items-center justify-center"},s.createElement("div",{className:" p-4 rounded-full border-gray-300 border border-opacity-50  \n          ".concat(H==t.id&&"bg-primary border-0 "," ").concat($>=t.id&&"bg-green-500 border-0 ")}),s.createElement("p",{className:"absolute text-15px antialiased mt-2px ".concat((H==t.id||$>=t.id)&&"text-white")},t.id)),s.createElement("p",{className:"antialiased text-15px "},t.name),t.id!=G.length&&s.createElement("div",{className:"w-full border  border-gray-300 border-opacity-50"}))},Q=function(e){var t=e.bg,a=void 0===t?"bg-primary":t,l=e.count,n=void 0===l?0:l,r=e.text,i=void 0===r?D.manage_points.progress.total:r,c=e.textStyle,o=void 0===c?"text-primary":c;return s.createElement("div",{className:"flex items-center justify-between space-x-3 ".concat(a," bg-opacity-5 py-2 px-5 ")},s.createElement("p",{className:"text-textColor text-15px antialiased"},i),s.createElement("p",{className:"text-15px ".concat(o," font-medium")},n))};s.useEffect((function(){l(N(N({},a),{},{selectedFile:A})),f(!1)}),[A]);var X=function(){var e={};e.importfile=a.selectedFile,e.wlr_nonce=n,e.need_update=a.need_update,e.limit=a.csv_limit,e.action="wlr_import_preview",e.update_type=j;var t=function(e){return["email","points","referral_code","comment"].includes(e)};(0,i.MB)(e).then((function(e){var a=(0,d.xu)(e.data);"completed"===a.success&&null!==a.data&&a.data!=={}?(Object.keys(a.data.header).every(t)?M(N(N({},a.data),{},{limit_start:w.Nf})):(alertify.error(D.common.format),S(null),(0,d.nM)("csvFileImport"),R(1),T(0)),f(!1)):(alertify.error(a.message),f(!1))}))},Z=function(e){var t=e.active,a=e.completed,l=e.disable,n=void 0!==l&&l,r=e.operation,i=void 0===r?null:r;return s.createElement(c.A,{padding:"px-5 py-2.5",bgColor:"bg-primary",textStyle:"text-sm text-white",click:function(e){e.preventDefault(),2===H&&o.set(!0),R(t),T(a),null!==i&&i(),f(!0)},disabled:n},D.common.next)},ee=function(e){var t=e.active,a=e.completed;return s.createElement(c.A,{padding:"px-5 py-2.5",bgColor:"bg-base-btn_bg",disabled:"string"==typeof F.response_status,textStyle:"text-sm text-textColor-light",click:function(e){e.preventDefault(),R(t),T(a)}},D.common.back)},te=function(){return s.createElement("div",{className:"grid grid-cols-2 gap-3 w-full min-w-full bg-primary_extra_light py-2 px-5 rounded"},s.createElement("p",{className:"text-textColor-light antialiased text-15px"},D.manage_points.progress.field_name),s.createElement("p",{className:"text-textColor-light antialiased text-15px"},D.manage_points.progress.field_value))},ae=function(e){var t=e.fieldName,a=e.fieldValue;return s.createElement("div",{className:"grid grid-cols-2 gap-3 w-full min-w-full pb-2 px-5 rounded border-b border-gray-300",key:t},s.createElement("p",{className:"text-textColor antialiased text-15px"},t),s.createElement("p",{className:"text-textColor antialiased text-15px"},a||"-"))},le=function(){return s.useEffect((function(){var e,t;!x&&(t=function(e){e.preventDefault(),S(e.dataTransfer.files[0])},(e=document.getElementById("drop-file-ref")).addEventListener("drop",t),e.addEventListener("dragover",t))}),[]),s.createElement("div",{className:"w-full flex flex-col items-start justify-start"},s.createElement("div",{className:"w-full flex flex-col items-start justify-start px-7"},s.createElement("p",{className:"leading-5 text-xs mt-3 tracking-wide py-2.5 px-3 font-normal rounded-md",style:{backgroundColor:"rgb(255,213,87)",color:"black"}},s.createElement("span",{className:"font-medium"},s.createElement("i",{className:"wlr wlrf-warning"})," ",D.manage_points.important_label)," ",D.manage_points.import_notice),s.createElement("div",{className:"w-full space-y-3"},s.createElement("input",{accept:"text/csv, .csv",id:"csvFileImport",type:"file",onChange:function(e){(0,d.LW)(e.target.files,["csv"],"csvFileImport")&&S(e.target.files[0])},ref:z,className:"hidden"}),s.createElement("div",{className:"flex flex-col items-center justify-center space-y-4 w-full py-10 border-2 border-dashed border-gray-300 rounded cursor-pointer",onClick:function(){return z.current.click()},id:"drop-file-ref"},A?s.createElement("i",{className:"wlr wlrf-file_check text-4xl text-primary"}):s.createElement("i",{className:"wlr wlrf-file_upload text-4xl text-textColor-light"}),A?s.createElement("p",{className:"text-15px text-textColor-light"},"".concat(D.manage_points.import.added," ").concat(A.name," "),s.createElement("span",{className:"text-primary "},D.manage_points.import.choose_another_file)," ".concat(D.manage_points.import.replace)):s.createElement("p",{className:"text-15px text-textColor-light"},"".concat(D.manage_points.import.drag_drop," "),s.createElement("span",{className:"text-primary "},D.manage_points.import.choose_file)," ".concat(D.manage_points.import.upload_data))))),s.createElement("div",{className:"flex items-end  w-full space-x-4 px-7 py-4 space-y-4 border-b border-light_border"},s.createElement(g.A,{width:"w-1/3"},s.createElement(v.A,{fontSize:"text-sm",others:" font-medium text-textColor"},D.manage_points.import.update_points),s.createElement(b.A,{options:W,value:a.need_update,onChange:function(e){l(N(N({},a),{},{need_update:e.value}))}})),s.createElement(g.A,{width:"w-1/3"},s.createElement(v.A,{fontSize:"text-sm",others:" font-medium text-textColor"},D.manage_points.import.records_per_batch),s.createElement(b.A,{options:K,value:a.csv_limit,onChange:function(e){l(N(N({},a),{},{csv_limit:e.value}))}})),s.createElement(g.A,{width:"w-1/3"},s.createElement(v.A,{fontSize:"text-sm",others:" font-medium text-textColor"},D.manage_points.import.points_update_type),s.createElement(b.A,{options:Y,value:j,onChange:function(e){O(e.value)}}))),s.createElement("div",{className:"flex w-full items-center justify-end px-7  py-3"},s.createElement(Z,{active:2,completed:1,disable:!A,operation:X,removeSelectedFileId:"csvFileImport"})))},ne=function(){return s.createElement("div",{className:"flex flex-col w-full"},s.createElement("div",{className:"w-full flex-col items-center justify-start px-7 pb-3  border-b border-light_border space-y-4 overflow-y-auto max-h-350 2xl:max-h-450"},s.createElement(Q,{count:F.total_count}),s.createElement(te,null),Object.keys(F.header).map((function(e,t){return s.createElement(ae,{key:t,fieldName:e,fieldValue:F.header[e]})}))),s.createElement("div",{className:"flex items-center space-x-3  py-3 px-7 justify-end"},s.createElement(ee,{active:1,completed:0}),s.createElement(Z,{active:3,completed:2,operation:B})))},re=function(){return s.createElement("div",{className:"flex flex-col w-full"},s.createElement("div",{className:"w-full flex-col items-start justify-start border-b border-light_border pb-3 px-7 space-y-4 overflow-y-auto max-h-350 2xl:max-h-450"},s.createElement("div",{className:"flex items-center justify-between bg-green-500 bg-opacity-5 py-2 px-5 rounded"},s.createElement("p",{className:"text-textColor text-15px antialiased"},D.manage_points.progress.processed),s.createElement("div",{className:"flex items-center gap-x-2 justify-between"},s.createElement(y.A,{processCount:F.process_count,totalCount:F.total_count}),s.createElement("p",{className:"text-15px text-green-500 font-medium"},F.process_count))),s.createElement(te,null),Object.keys(F.header).map((function(e,t){return s.createElement(ae,{key:t,fieldName:e,fieldValue:F.header[e]})}))))};return s.createElement("div",{className:"w-35rem mt-3 xl:mt-4 2xl:mt-5 flex flex-col items-start justify-start space-y-5"},s.createElement((function(){return s.createElement("div",{className:"w-full flex items-center px-24 space-x-2 justify-center"},G.map((function(e){return s.createElement(J,{item:e,key:e.id})})))}),null),x?s.createElement(h.A,{height:"h-[250px]"}):s.createElement("div",{className:"flex flex-col w-full space-y-3"},function(){switch(H){case 1:default:return s.createElement(le,null);case 2:return s.createElement(ne,null);case 3:return s.createElement(re,null)}}()))};var S=a(3772);const C=function(e){e.close;var t=e.localState,a=s.useContext(u.ib),l=function(e){var t=e.fileName,l=e.download;return s.createElement("div",{className:"flex items-center px-5 py-3 justify-between gap-3 w-full min-w-full border border-light_border  bg-primary_extra_light rounded ",key:t},s.createElement("div",{className:"flex justify-start gap-x-2"},s.createElement("div",null,s.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-file color-important "})),s.createElement("p",{className:"text-textColor antialiased text-15px"},t)),s.createElement("a",{download:t,href:l,className:"text-sm text-primary hover:text-green-500 border-none shadow-none"},a.manage_points.progress.download))};return s.createElement("div",{className:"w-35rem flex flex-col justify-start items-start p-5 h-125 2xl:h-150 space-y-2 overflow-y-auto"},t.local.point_users.export_csv_file_list.map((function(e,t){return s.createElement(l,{fileName:e.file_name,download:e.file_url,key:t})})))};var k=a(2235),j=a(5873),O=a(8592);const D=function(e){var t=e.icon,a=e.title,l=e.description,n=e.import_customer,r=e.add_new,i=e.importAction,o=e.addNewCustomerAction,m=(0,s.useContext)(u.Hi);return s.createElement("div",{className:"w-full  h-120 flex flex-col justify-center items-center gap-y-2 2xl:gap-y-4 bg-white"},s.createElement("div",null,t),s.createElement("h2",{className:"text-sm 2xl:text-xl text-dark font-bold"},a),s.createElement("p",{className:"text-light text-base font-normal  text-center tracking-wide max-w-xl leading-7.5"},l),m&&s.createElement("div",{className:"flex items-center justify-center gap-2 2xl:gap-3"},s.createElement(c.A,{padding:"px-3 2xl:px-5 py-2 2xl:py-3",bgColor:"bg-white",outline:!0,textStyle:"text-primary font-medium text-xs 2xl:text-sm_14_l_20",outlineStyle:"border-primary_border",others:"hover:shadow-none",click:i},n),s.createElement(c.A,{padding:"px-3 2xl:px-5 py-2 2xl:py-3",bgColor:"bg-primary",outline:!1,textStyle:"text-white font-medium text-xs 2xl:text-sm_14_l_20",others:"hover:shadow-none",click:o},r)))};var P=a(140),L=a(7859),F=a(6211);const M=function(e){var t=e.AllCheck,a=e.AllCheckList,l=e.setAllCheck,n=e.State,r=e.active,i=e.setActive,c=e.activeState,o=e.setActiveState,m=e.CommonState,p=(0,s.useContext)(u.ib),x=s.useContext(u.Hi),f=function(e){var t=e.children,a=e.span,l=e.subtitle;return s.createElement("div",{className:"grid ".concat(a,"  absoulute  text-light text-10px 2xl:text-12px font-semibold uppercase leading-4 self-center")},t," ",s.createElement("span",{className:"text-extra_light font-normal text-10px "},l))};return s.createElement("div",{className:"grid grid-cols-12 items-center 2xl:gap-3 w-full min-w-full  py-4",style:{minWidth:"1024px"}},s.createElement(F.A,{checked:t&&a.length===n.users.length,click:function(){return l(!t)}}),s.createElement((function(e){var t=e.children,a=e.span;return e.subtitle,s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a)},s.createElement("div",{onClick:function(){(0,d.$R)(r,i,p.common.email_descending,p.common.email_ascending,"email_desc","email_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 cursor-pointer"},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),s.createElement("span",{className:"text-light flex items-center"},["email_asc","email_desc"].includes(c.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("email_asc"===c.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-3"},p.manage_points.customers),s.createElement((function(e){var t=e.children,a=e.span;return s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a," ")},s.createElement("div",{onClick:function(){(0,d.$R)(r,i,p.common.point_descending,p.common.point_ascending,"point_desc","point_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 cursor-pointer"},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),s.createElement("span",{className:"text-light flex items-center"},["point_asc","point_desc"].includes(c.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("point_asc"===c.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-3"},p.common.points_text),s.createElement((function(e){var t=e.children,a=e.span;return s.createElement("div",{className:"grid ".concat(a,"  absoulute")},s.createElement("div",{className:"text-light text-10px 2xl:text-12px font-semibold uppercase leading-4"},t))}),{span:"col-span-2"},p.rewards.name),s.createElement((function(e){var t=e.children,a=e.span;return e.subtitle,s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a)},s.createElement("div",{onClick:function(){x&&(0,d.$R)(r,i,p.common.level_descending,p.common.level_ascending,"level_desc","level_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 ".concat(x&&"cursor-pointer"," ")},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),x&&s.createElement("span",{className:"text-light flex items-center"},["level_asc","level_desc"].includes(c.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("level_asc"===c.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-1"},p.manage_points.levels_image),s.createElement(f,{span:"col-span-1"},p.levels.created_on_label),s.createElement(f,{span:"col-span-1 md:justify-center"},p.common.actions))};var B=a(9327),z=a(7733),I=a(5586);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){(0,l.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=s.lazy((function(){return a.e(817).then(a.bind(a,8703))}));const U=function(){var e=s.useContext(u.ib),t=s.useContext(u.Hi),a=s.useContext(u.DC),l=a.CommonState,p=a.setCommonState,x=a.appState,f=l.customers,g=f.sort,v=f.limit,b=f.search,h=s.useState(null),y=(0,r.A)(h,2),E=y[0],N=y[1],F=s.useState({loading:!0,users:[],pageCount:1,offset:0,selectedFile:null,need_update:"no",csv_limit:w.hr,export_popup:!1,export_limit:w.r,export_process_item:0,export_total_count:0,export_none:""}),q=(0,r.A)(F,2),U=q[0],V=q[1],$=!1,T=s.useState(!1),W=(0,r.A)(T,2),K=W[0],Y=W[1],G=s.useState(!1),J=(0,r.A)(G,2),Q=J[0],X=J[1],Z=s.useState(!1),ee=(0,r.A)(Z,2),te=ee[0],ae=ee[1],le=s.useState(!1),ne=(0,r.A)(le,2),re=ne[0],se=ne[1],ie=s.useState(!1),ce=(0,r.A)(ie,2),oe=ce[0],me=ce[1],ue=s.useState(!1),de=(0,r.A)(ue,2),pe=de[0],xe=de[1],fe=s.useState(!1),_e=(0,r.A)(fe,2),ge=_e[0],ve=_e[1],be=s.useState(""),we=(0,r.A)(be,2),he=we[0],ye=we[1],Ee=s.useState([]),Ne=(0,r.A)(Ee,2),Ae=Ne[0],Se=Ne[1],Ce=s.useState(!1),ke=(0,r.A)(Ce,2),je=ke[0],Oe=ke[1],De=s.useState(!1),Pe=(0,r.A)(De,2),Le=Pe[0],Fe=Pe[1],Me=s.useState(!1),Be=(0,r.A)(Me,2),ze=Be[0],Ie=Be[1],qe=s.useState(""),He=(0,r.A)(qe,2),Re=He[0],Ue=He[1],Ve=[{value:"all",label:e.common.active_all},{value:"id_asc",label:e.common.id_asc},{value:"id_desc",label:e.common.id_desc},{value:"email_asc",label:e.common.email_ascending},{value:"email_desc",label:e.common.email_descending},{value:"level_asc",label:e.common.level_ascending},{value:"level_desc",label:e.common.level_descending},{value:"point_asc",label:e.common.point_ascending},{value:"point_desc",label:e.common.point_descending}],$e=function(e){var t=(0,n.A)(Ae);t.includes(e)?(t.splice(t.indexOf(e),1),Se(t)):Se([].concat((0,n.A)(t),[e]))},Te=function(e){var t={wlr_nonce:x.local.point_users.wlr_user_nonce,action:"wlr_get_customer_list",limit:v.value,offset:void 0!==(null==e?void 0:e.offset)?e.offset:f.offset,sorting_field:g.value,search:(null==e?void 0:e.search)||b};V(H(H({},U),{},{loading:!0})),(0,i.MB)(t).then((function(e){var t=(0,d.xu)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?V((function(e){return H(H({},e),{},{users:t.data.item,pageCount:Math.ceil(t.data.total_count/t.data.limit),loading:!1})})):!1===t.success&&null!==t.data&&(alertify.error(t.data.message),ye(b),V(H(H({},U),{},{loading:!1})))}))},We=function(e){var t={wlr_nonce:x.local.common.wlr_common_user_nonce,action:"wlr_update_customer_birth_date",id:e.id,birth_date:e.birthday_date};V(H(H({},U),{},{loading:!0})),(0,i.MB)(t).then((function(e){var t=(0,d.xu)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?(V(H(H({},U),{},{loading:!1})),alertify.success(t.data.message)):!1===t.success&&null!==t.data&&(V(H(H({},U),{},{loading:!1})),alertify.error(t.data.message)),Te()}))};s.useEffect((function(){$=!0,Te()}),[x]),s.useEffect((function(){if(!$){var e=H({},l);e.customers.offset=0,p(e),Te()}}),[g,v]);var Ke=function(){var e=H({},l);e.customers.offset=0,p(e),ye(b),Te({search:b,offset:0})};s.useLayoutEffect((function(){var e=[];ge?(U.users.map((function(t){return e.push(t.id)})),Se(e)):Se([])}),[ge]),s.useEffect((function(){0!==U.users.length&&U.users.length===Ae.length&&ve(!0)}),[Ae]);var Ye,Ge,Je=function(e,t){var a=(0,n.A)(U.users);a.map((function(a){t.id===a.id&&(a.birthday_date=e)})),V(H(H({},U),{},{users:a}))},Qe=function(){var e={action:"wlr_bulk_delete_users",user_list:Ae,wlr_nonce:x.local.point_users.wlr_user_nonce};(0,i.MB)(e).then((function(e){var t=(0,d.xu)(e.data);!0===t.success&&t.data!=={}?(alertify.success(t.data.message),Se([]),ve(!1)):alertify.error(t.data.message),Te()}))},Xe=function(e){var t={action:"wlr_delete_customer",id:e,wlr_nonce:x.local.point_users.wlr_user_nonce};(0,i.MB)(t).then((function(e){var t=(0,d.xu)(e.data);!0===t.success&&t.data!=={}?(alertify.success(t.data.message),Se([]),ve(!1)):alertify.error(t.data.message),Te()}))};return s.createElement("div",{className:"bg-white w-full rounded-b-xl h-full flex flex-col items-start py-5 px-8 space-y-4 "},s.createElement("div",{className:"flex items-center justify-between w-full gap-x-1.5"},s.createElement(j.A,{title:e.manage_points.name,videoLink:e.common.all_video_links.point_users}),s.createElement("div",{className:"flex items-center gap-x-1.5 2xl:gap-x-2 "},Ae.length>0?s.createElement(c.A,{icon:s.createElement("i",{className:"text-md leading-0 antialiased wlr wlrf-delete text-redd color-important "}),bgColor:"bg-white",textStyle:"text-redd font-medium text-sm_14_l_20",padding:"px-5 py-3",outline:!0,outlineStyle:"border-redd",click:function(t){t.preventDefault(),(0,O.Vx)(Qe,e.manage_points.delete_multi_alert_message,e.manage_points.delete_ok,e.manage_points.delete_cancel,e.manage_points.delete_customer)}},e.common.delete):s.createElement("div",{className:"flex items-center gap-x-1.5 2xl:gap-x-2"},s.createElement(k.A,{id:"search_customers",search_icon_id:"search_customer_icon",placeHolder:e.manage_points.search_customer,value:b,onChange:function(e){var t=H({},l);t.customers.search=e.target.value,p(t)},onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),Ke())},click:function(e){e.preventDefault(),Oe(!1),Fe(!1),Ke()},onfocus:function(e){Oe(!1),Fe(!1)},others:"w-32.5 xl:w-37.5 2xl:w-45"}),s.createElement(P.A,{title:e.common.sort_by,active:je,setActive:Oe,activeState:g,setActiveState:function(e){var t=H({},l);t.customers.sort={value:e.value,label:e.label},p(t)},activeLabels:t?Ve:(Ye=Ve,Ge=[],(0,n.A)(Ye).map((function(e){["level_asc","level_desc"].includes(e.value)||Ge.push(e)})),Ge),width:"w-44",icon:s.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-filter color-important  "}),closeOtherDropDown:function(){Fe(!1)}}),s.createElement(c.A,{id:"import_customers",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-import color-important"}),bgColor:"bg-white",textStyle:"text-primary font-medium text-xs  2xl:text-sm_14_l_20",h:!0,padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,outlineStyle:"border-primary",click:function(e){e.preventDefault(),t&&(X(!0),Oe(!1),Fe(!1))},is_pro:t},e.manage_points.import_txt),s.createElement(c.A,{id:"export_customers",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-export color-important "}),bgColor:"bg-white",textStyle:"text-primary font-medium text-xs  2xl:text-sm_14_l_20",padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,outlineStyle:"border-primary",click:function(e){t&&(e.preventDefault(),ae(!0),Oe(!1),Fe(!1))},is_pro:t},e.manage_points.export_txt),x.local.point_users.show_export_file_download>0&&t&&s.createElement(c.A,{padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-document-download color-important "}),bgColor:"bg-white",textStyle:"text-xs  2xl:text-sm_14_l_20 text-primary ",minwidth:"180px",click:function(e){e.preventDefault(),t&&(xe(!0),Oe(!1),Fe(!1))},is_pro:t},e.manage_points.exported_txt),s.createElement(c.A,{id:"add_new_customer",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-customer color-important "}),bgColor:"bg-primary",textStyle:"text-white font-medium text-xs  2xl:text-sm_14_l_20",padding:"xl:px-3 2xl:px-5 px-2.5 py-3",outline:!0,outlineStyle:"border-primary_light",click:function(e){e.preventDefault(),t&&(Y(!0),Oe(!1),Fe(!1))},is_pro:t},e.manage_points.add_new_customer_txt)))),s.createElement("div",{className:"flex flex-col items-start w-full ",onClick:function(){Oe(!1)}},s.createElement(M,{AllCheck:ge,AllCheckList:Ae,setAllCheck:ve,State:U,active:ze,setActive:Ie,activeState:g,setActiveState:p,CommonState:l}),U.loading?s.createElement(z.A,{listData:v.value,height:"h-158"}):U.users.length>0?s.createElement("div",{className:"relative flex flex-col space-y-2 items-start w-full min-h-158",onClick:function(){Fe(!1)}},U.users.map((function(e){return s.createElement(s.Suspense,{key:e.id,fallback:s.createElement(B.A,{height:"h-30"})},s.createElement(R,{key:e.id,user:e,State:U,setState:V,localState:x,AllCheckList:Ae,AddCheck:$e,updateAction:We,deleteUser:Xe,save:Je,copied:{value:Re,set:Ue},ShowPoints:{value:oe,set:me},id:{value:E,set:N}}))}))):s.createElement(D,{icon:s.createElement("i",{className:"text-6xl 2xl:text-8xl text-primary  wlr wlrf-customer-empty color-important "}),title:""===he?e.manage_points.empty.name:e.manage_points.no_customers,description:""===he?e.manage_points.empty.description:e.manage_points.no_customers_description,import_customer:e.manage_points.import_customers,add_new:e.manage_points.add_new_customer_txt,importAction:function(e){e.preventDefault(),X(!0)},addNewCustomerAction:function(e){e.preventDefault(),Y(!0)}}),s.createElement("div",{className:"flex items-center justify-end  w-full py-3"},U.users.length>0&&s.createElement(L.A,{editLimit:Le,setEditLimit:Fe,limitFilter:v,setLimitFilter:function(e){var t=H({},l);t.customers.limit={value:e.value},p(t)},closeOtherDropDown:function(){Oe(!1)}}),U.pageCount>1&&s.createElement(o.A,{handlePageClick:function(e){var t=e.selected,a=Math.ceil(t*v.value),n=H({},l);n.customers.offset=a,p(n),Te()},pageCount:U.pageCount,limit:!0,forcePage:f.offset/f.limit.value,loading:U.loading}))),K&&s.createElement(m.A,{title:e.manage_points.add_new_customer_txt,open:K,setOpen:Y},s.createElement(_,{open:K,setOpen:Y,localState:x,loadUserLists:Te,close:function(){return Y(!1)}})),Q&&s.createElement(m.A,{title:e.manage_points.import_customers,open:Q,setOpen:X,clickOutSide:!1,isProgress:re},s.createElement(A,{close:function(){return X(!1)},State:U,setState:V,nonce:x.local.point_users.wlr_user_nonce,isProgress:{val:re,set:se}})),te&&s.createElement(m.A,{title:e.manage_points.export_customers,open:te,setOpen:ae,clickOutSide:!1,isProgress:re},s.createElement(S.A,{close:function(){return ae(!1)},State:U,setState:V,isProgress:{val:re,set:se},nonce:x.local.point_users.wlr_user_nonce})),xe&&s.createElement(m.A,{title:e.manage_points.download_exports,open:pe,setOpen:xe},s.createElement(C,{close:function(){return pe(!1)},localState:x})),oe&&s.createElement(m.A,{title:e.manage_points.update_points,open:oe,setOpen:me},s.createElement(I.A,{id:E,handlePointUpdate:d.Yc,reload:Te,nonce:x.local.common.wlr_common_user_nonce,setShowPoints:me})))}}}]);